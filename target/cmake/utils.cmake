
#execute_process(COMMAND ${ROOT}/script.bat)
if(WIN32)
	set(ENV{GCC_EXEC_PREFIX} /cygdrive/D/Module/NMC-SDK/nmc4-ide/lib/gcc/)
	file(TO_NATIVE_PATH  $ENV{NMC_GCC_TOOLPATH}/nmc4-ide/bin path_bin)
	file(TO_NATIVE_PATH  $ENV{NMC_GCC_TOOLPATH}/nmc4-ide/lib path_lib)
	LIST(APPEND CMAKE_PROGRAM_PATH ${path_bin} ${path_lib})
endif()

macro(add_nmc_compiler_type_option sources)
	foreach(file ${sources})
		get_filename_component(extension ${file} EXT)
		if(extension STREQUAL .asm)
			list(APPEND asm_files ${file})
		elseif(extension STREQUAL .S)
			list(APPEND s_files ${file})
		elseif(extension STREQUAL .s)
			list(APPEND s_files ${file})
		endif()
	endforeach()

	set_source_files_properties( ${asm_files} PROPERTY COMPILE_FLAGS "-mmas" )
	set_source_files_properties( ${s_files}   PROPERTY COMPILE_FLAGS "-mgas" )
endmacro()